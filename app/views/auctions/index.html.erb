<div class="container col-8">
  <div class="p-2 d-flex justify-content-between align-items-center">
    <h2>My Shop Lists</h2>
    <div class="d-flex flex-column align-items-center">
      <%= link_to '<i class="fas fa-plus-circle"></i>'.html_safe, new_auction_path, class: 'display-4' %>
      <span>ADD LIST</span>
    </div>
  </div>
  <div class="m-3 p-2">
    <div class="my-3">
      <h3>Open</h3>
      <div id="auctions-index" data-user-id="<%= current_user.id %>">
        <% @auctions.order(:deadline).select { |auct| auct.deadline > Time.now }.each do |auction| %>
          <ul class="list-group">
            <li class="list-group-item">
              <div class="row align-items-center">
                <div class="col">
                  <h5><%= link_to "#{auction.list_name}", auction_path(auction)%></h5>
                </div>
                <div class="col">
                  <%= link_to auction_path(auction) do%>
                    <button type="button" class="w-50 btn btn-primary">
                      Lances <span id="bids-counter" data-auction-id="<%= auction.id %>" class="badge badge-light"><%= auction.bids.count %></span>
                    </button>
                  <% end %>
                </div>
                <div class="col-12 col-sm-4">
                  <span>Time left: <%= "#{distance_of_time_in_words(Time.now, auction.deadline.to_time)}" %></span>
                </div>
              </div>
            </li>
          </ul>
        <% end %>
      </div>
    </div>
    <div class="my-3">
      <h3>Ended</h3>
      <% @auctions.select { |auct| auct.deadline < Time.now }.each do |auction| %>
        <ul class="list-group">
          <li class="list-group-item">
            <div class="row align-items-center">
              <div class="col">
                <h5><%= link_to "#{auction.list_name}", auction_path(auction)%></h5>
              </div>
              <div class="col">
                <span>Bids: <%= auction.bids.count %></span>
              </div>
              <div class="col-12 col-sm-4">
                <span>Ended: <%= "#{auction.deadline.to_time.strftime("%d/%m/%Y - %H:%M")}" %></span>
              </div>
            </div>
          </li>
        </ul>
      <% end %>
    </div>
  </div>
</div>
<%= render 'shared/control_footer' %>
